<html>
<head>
</head>
<body>
<canvas id="field" width="500" height="400"
        style="position:fixed;top:0px;left:0px;width:500px;height:400px;border:2px solid;"></canvas>
<!--<div id="snake1" style="position: absolute;width:4px ;height: 4px;background-color: red;"></div>-->
<!--<div id="snake2" style="position: absolute;width:4px ;height: 4px;background-color: blue;"></div>-->
<script type="text/javascript">

    (function () {
        var canvas = document.getElementById('field');
        var ctx = canvas.getContext('2d');
        ctx.beginPath();
        var x = 2, y = 2, randomValue = 0, count = 0, step = 5, massPointsX = [], massPointsY = [], left = false, right = false, up = false, down = false;
        ctx.moveTo(x, y);
        ctx.lineWidth = 3;
        ctx.strokeStyle = "#ff0000";
        function random() {
            randomValue = Math.floor(Math.random() * (2 - 0) + 0);
        }

        function falseVal() {
            right = false;
            left = false;
            up = false;
            down = false;
        }

        function move() {
            function loop() {
                falseVal();
                random();
                if (randomValue == 1) {
                    random();
                    if (randomValue == 1) {
                        x = x + step;
                        right = true;
                    }
                    else if (randomValue == 0) {
                        x = x - step;
                        left = true;
                    }
                }
                else if (randomValue == 0) {
                    random();
                    if (randomValue == 1) {
                        y = y + step;
                        down = true;
                    }
                    else if (randomValue == 0) {
                        y = y - step;
                        up = true;
                    }
                }
                massPointsX.push(x);
                massPointsY.push(y);
                for (var i = 0; i < massPointsX.length; i++) {

                    if (x == massPointsX[i - 1] && y == massPointsY[i - 1]) {
                        if (right) {
                            x = x - step;
                            falseVal();
                        }
                        else if (left) {
                            x = x + step;
                            falseVal();
                        }
                        else if (up) {
                            y = y + step;
                            falseVal();
                        }
                        else if (down) {
                            y = y - step;
                            falseVal();
                        }
                        console.log('asa');
                    }
                }
                if (x > 500) {
                    x = x - step;
                }
                if (x < 0) {
                    x = x + step;
                }
                if (y > 400) {
                    y = y - step;
                }
                if (y < 0) {
                    y = y + step;
                }

                count++;

                ctx.lineTo(x, y);
                ctx.stroke();
                if (count > 2500) {
                    count = 0;
                    clearInterval(loopInterval);
                }
            }

            var loopInterval = setInterval(loop, 0);
        }

        move();
    })
    ();
</script>
</body>
</html>